<p id="notice"><%= notice %></p>

<h1>Dein Warenkorb</h1>

<table class="table">
  <thead>
  <tr>
    <th>Abbildung</th>
    <th>Produkt</th>
    <th>Menge</th>
    <th>Preis</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% if @cart.line_items.present? %>

    <% @cart.line_items.each do |item| %>
      <tr>
        <td><%= image_tag item.product.avatar.url(:small) %></td>
        <td><%= item.product.name %></td>
        <td><%= item.quantity %></td>
        <td><%= number_to_currency(item.total_price) %></td>
        <td><%= link_to 'Produkt entfernen', item, method: :delete, data: { confirm: 'Produkt wirklich entfernen?' }, class: 'btn btn-default btn-xs' %>

      </tr>
    <% end %>
  <tr>
    <td></td>
    <td></td>

    <th>Gesamt</th>
    <th><%= number_to_currency(@cart.total_price) %></th>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <% if @cart.line_items.present? %>
        <td>
          <%= button_to 'Warenkorb leeren', @cart, :method => :delete, :confirm => "Sind Sie Sicher?", class: 'btn btn-default btn-xs' %>
        </td>
        <td>
          <% if user_signed_in? %> 
          <%= button_to 'Bestellen via Vorkasse', orders_path, class: 'btn btn-default btn-xs' %>
          <% else %>
          <%= button_to 'Bitte melden Sie sich an', new_user_session_path, class: 'btn btn-default btn-xs' %>
          <%end%>
        </td>
    <% else %>
        <td></td>
        <td></td>
    <% end %>
  </tr>
    <%else%>
    <tr>
      <td>Dein Warenkorb ist leer!</td>
    </tr>
  <% end %>
  </tbody>
</table>

